import{f as u,a as c,c as R}from"../chunks/DXwTCEs2.js";import{o as T}from"../chunks/CKHj2-aw.js";import{ag as V,ai as W,ah as m,aj as s,a1 as o,am as A,g as e,ak as l,an as X,ao as g}from"../chunks/e8XAVhbW.js";import{s as h}from"../chunks/Dl4wrC1f.js";import{i as _}from"../chunks/B2-igs9x.js";import{s as Y}from"../chunks/BRyW6QQ3.js";import{c as Z}from"../chunks/BoqZBqRB.js";var $=u("<p>Loading...</p>"),aa=u('<img alt="Profile" class="profile-avatar svelte-maq4gq"/>'),ea=u('<div class="detail-item svelte-maq4gq"><label class="svelte-maq4gq">Email</label> <p class="svelte-maq4gq"> </p></div>'),ta=u('<div class="detail-item svelte-maq4gq"><label class="svelte-maq4gq">Member since</label> <p class="svelte-maq4gq"> </p></div>'),ra=u('<div class="profile-section svelte-maq4gq"><!> <div class="profile-details svelte-maq4gq"><div class="detail-item svelte-maq4gq"><label class="svelte-maq4gq">Name</label> <p class="svelte-maq4gq"> </p></div> <!> <div class="detail-item svelte-maq4gq"><label class="svelte-maq4gq">User ID</label> <p class="user-id svelte-maq4gq"> </p></div> <!></div></div>'),sa=u("<p>Please log in to view your profile.</p>"),la=u('<div class="page-container svelte-maq4gq"><h1 class="svelte-maq4gq">Profile</h1> <!></div>');function na(E,L){V(L,!0);let f=A(null),a=A(null),q=A(!0);T(()=>{o(f,Z(),!0),M(),e(f).auth.onAuthStateChange((t,i)=>{i?.user?o(a,i.user,!0):o(a,null),o(q,!1)})});async function M(){if(e(f)){o(q,!0);try{const{data:{session:t},error:i}=await e(f).auth.getSession();i?(console.error("Auth error:",i),o(a,null)):t?.user?o(a,t.user,!0):o(a,null)}catch(t){console.error("Error checking auth:",t),o(a,null)}finally{o(q,!1)}}}var b=la(),N=m(s(b),2);{var j=t=>{var i=$();c(t,i)},I=t=>{var i=R(),U=X(i);{var z=d=>{var n=ra(),w=s(n);{var F=r=>{var v=aa();g(()=>Y(v,"src",e(a).user_metadata.avatar_url||e(a).user_metadata.picture)),c(r,v)};_(w,r=>{(e(a).user_metadata?.avatar_url||e(a).user_metadata?.picture)&&r(F)})}var D=m(w,2),x=s(D),P=m(s(x),2),G=s(P,!0);l(P),l(x);var S=m(x,2);{var H=r=>{var v=ea(),p=m(s(v),2),y=s(p,!0);l(p),l(v),g(()=>h(y,e(a).email)),c(r,v)};_(S,r=>{e(a).email&&r(H)})}var k=m(S,2),C=m(s(k),2),J=s(C,!0);l(C),l(k);var K=m(k,2);{var O=r=>{var v=ta(),p=m(s(v),2),y=s(p,!0);l(p),l(v),g(Q=>h(y,Q),[()=>new Date(e(a).created_at).toLocaleDateString()]),c(r,v)};_(K,r=>{e(a).created_at&&r(O)})}l(D),l(n),g(()=>{h(G,e(a).user_metadata?.full_name||e(a).user_metadata?.name||"Not provided"),h(J,e(a).id)}),c(d,n)},B=d=>{var n=sa();c(d,n)};_(U,d=>{e(a)?d(z):d(B,!1)},!0)}c(t,i)};_(N,t=>{e(q)?t(j):t(I,!1)})}l(b),c(E,b),W()}export{na as component};
